_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[97],{"1RBv":function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/studio",function(){return a("et6c")}])},"30+C":function(t,e,a){"use strict";var n=a("wx14"),o=a("Ff2n"),r=a("q1tI"),i=a("iuhU"),s=a("kKAo"),c=a("H2TA"),l=r.forwardRef((function(t,e){var a=t.classes,c=t.className,l=t.raised,u=void 0!==l&&l,p=Object(o.a)(t,["classes","className","raised"]);return r.createElement(s.a,Object(n.a)({className:Object(i.a)(a.root,c),elevation:u?8:1,ref:e},p))}));e.a=Object(c.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(l)},AXF1:function(t,e,a){"use strict";var n=a("HALo"),o=a("dhJC"),r=a("30+C"),i=a("oa/T"),s=a("tRbT"),c=a("ofer"),l=a("469l"),u=a("R/WZ"),p=a("iuhU"),d=a("q1tI"),m=a.n(d).a.createElement,f={"/images/logos/html5.svg":5},b=Object(u.a)((function(t){return{root:{height:"100%",width:"100%",cursor:"pointer",borderRadius:t.spacing(1)},companyAvatar:{width:60,height:60},dot:{display:"inline-block",width:t.spacing(1),height:t.spacing(1),background:t.palette.text.primary,borderRadius:"100%",marginRight:t.spacing(1)},dotSmall:{width:t.spacing(.5),height:t.spacing(.5)},companyName:{fontWeight:500},dotMargin:{margin:t.spacing(0,1)},dotBig:{width:t.spacing(1.5),height:t.spacing(1.5)}}}));e.a=function(t){t.jobTitle;var e=t.jobLocation,a=t.companyLogo,u=t.companyName,d=(t.jobsCount,t.companyInfo,t.className),y=Object(o.a)(t,["jobTitle","jobLocation","companyLogo","companyName","jobsCount","companyInfo","className"]),v=b();return m(r.a,Object(n.a)({className:Object(p.a)("card-company",v.root,d),align:"left"},y),m(i.a,null,m(s.a,{container:!0,spacing:1},m(s.a,{item:!0,xs:12},m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},m("div",null,m(c.a,{variant:"h6",className:v.companyName},u),m(c.a,{component:"span",variant:"body2",color:"textSecondary"},e)),m("div",null,m(l.a,{style:{padding:f[a]||0},src:a,alt:u,className:v.companyAvatar})))))))}},dhJC:function(t,e,a){"use strict";function n(t,e){if(null==t)return{};var a,n,o=function(t,e){if(null==t)return{};var a,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(o[a]=t[a]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}a.d(e,"a",(function(){return n}))},et6c:function(t,e,a){"use strict";a.r(e);var n=a("vJKn"),o=a.n(n),r=a("rg98"),i=a("xvhg"),s=a("ofer"),c=a("9jPY"),l=a("Z3vd"),u=a("wb2y"),p=a("+Isj"),d=a("iae6"),m=a("Ji2X"),f=a("tRbT"),b=a("R/WZ"),y=a("4IS1"),v=a.n(y),g=a("577m"),h=a.n(g),j=a("8Kt/"),w=a.n(j),k=a("nOHt"),O=a("q1tI"),x=a.n(O),S=a("/MKj"),N=a("8lYe"),_=a("6yR0"),T=a("FP5W"),I=a("Gur3"),A=a("AXF1"),C=a("qnr4"),R=a("X+46"),W=a("uGE4"),q=a("udWi"),E=x.a.createElement;function L(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"===typeof t)return P(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(t,e)}(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var M=[],B=["theme","apiKey","userApiToken"],F=["labels.studio"],K=Object(b.a)((function(t){return{root:{},backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}})),D=function(t){K();var e=t.title,a=t.value,n=t.previousValue,o=null;n&&(o=a-n,o=Math.round(o/n*100),o=Math.round(100*o)/100);var r=o>=0?"up":"down";return E(x.a.Fragment,null,E(s.a,{variant:"body2",color:"textSecondary"},e),E(f.a,{container:!0,alignItems:"center"},E(s.a,{variant:"h6",component:"body1",gutterBottom:!0,style:{marginRight:12,marginTop:4}},a),o&&E(f.a,{item:!0},E(c.a,{style:{borderRadius:4,backgroundColor:"up"===r?"rgb(24, 144, 255)":"rgb(250, 173, 20)",color:"white"},icon:E("up"===r?h.a:v.a,{style:{color:"white"}}),label:"".concat(Math.abs(o),"%"),size:"small"}))))},J=function(t){var e=K(),a=Object(k.useRouter)(),n=Object(S.c)(),c=(a.query,Object(S.d)((function(t){return t.user}))),b=(c.userLoggedIn,c.token),y=(c._id,c.name,c.theme),v=c.plan,g=Object(S.d)((function(t){return t.user.token})),h=Object(O.useState)({}),j=h[0],P=h[1],J=Object(O.useState)(!1),X=(J[0],J[1],Object(O.useState)(null)),Y=X[0],U=X[1],H=Object(O.useState)(null),V=H[0],z=H[1],Z=Object(O.useState)(!0),G=Z[0],$=Z[1],Q=x.a.useState(!1),tt=Object(i.a)(Q,2),et=tt[0],at=tt[1],nt=x.a.useState(""),ot=Object(i.a)(nt,2),rt=(ot[0],ot[1]),it=Object(O.useState)(!!a.asPath.startsWith("/embed")),st=it[0];it[1];function ct(){return(ct=Object(r.a)(o.a.mark((function t(e,a){var r,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.i)("/api/v1/loginUser",null,{apiKey:e,userApiToken:a});case 2:r=t.sent,i=r.statusCode,s=r.json,200===i&&"success"===(null===s||void 0===s?void 0:s.status)?n(Object(W.d)(s,!0)):alert("API login failed. "+JSON.stringify(s||{}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(O.useEffect)((function(){if(a.asPath.startsWith("/embed")){var t,e={},o=L(M);try{for(o.s();!(t=o.n()).done;){var r=t.value;a.query[r]&&"true"===a.query[r]&&(e[r]=!0)}}catch(m){o.e(m)}finally{o.f()}var i,s=L(B);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.query[c]&&(e[c]=a.query[c])}}catch(m){s.e(m)}finally{s.f()}var l,u={},p=L(F);try{for(p.s();!(l=p.n()).done;){var d=l.value;a.query[d]&&(u[d]=a.query[d])}}catch(m){p.e(m)}finally{p.f()}P(u),e.apiKey&&e.userApiToken&&function(t,e){ct.apply(this,arguments)}(e.apiKey,e.userApiToken),e.theme&&e.theme!==y&&n(Object(W.f)(e.theme,!0))}}),[]),Object(O.useEffect)((function(){var t,e=R[a.query.template];(null===e||void 0===e||null===(t=e.datasets)||void 0===t?void 0:t.length)>0&&rt(e.datasets[0].id)}),[a.query.template]),Object(O.useEffect)((function(){st&&a.query.userApiToken&&!b||lt()}),[b]);var lt=function(){var t=Object(r.a)(o.a.mark((function t(){var e,a,n,r,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(I.g)("/api/studio/workspace/stats",g);case 2:return e=t.sent,a=e.json,z(a),$(!0),t.next=8,Object(I.g)("/api/studio/workspaces",g);case 8:n=t.sent,r=n.statusCode,i=n.error,s=n.json,200===r?(s=s.filter((function(t){return"deleted"!==t.status&&"delete_failed"!==t.status})),U(s)):alert(i),$(!1);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ut=function(){var t=Object(r.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:at(!0),"running"===e.status||"stopped"===e.status?q.Router.pushRoute("/studio/".concat(e.template._id,"/").concat(e._id)):"stopping"===e.status?alert("Workspace is stopping. Please try again in a minute."):alert("Workspace cannot be opened. Please contact support"),at(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return E(x.a.Fragment,null,E(w.a,null," ",E("title",null,"Studio - OneCompiler")," "),E("div",{className:e.root},!1===st&&E(_.a,null),st&&E("div",{style:{marginTop:30}}),E(m.a,{fixed:!0,component:"main"},E(s.a,{variant:"h3",component:"h1",color:"primary",gutterBottom:!0},j["labels.studio"]||"Studio"),"enterprise"===v&&!st&&E(x.a.Fragment,null,E(q.Link,{prefetch:!1,route:"/studio-admin"},E("a",{className:"textDecorationNone"}," ",E(l.a,{color:"primary"},"Studio Admin")," ")),E(u.a,null)," ",E("br",null)),E(s.a,{variant:"body1",color:"textSecondary"},"".concat(j["labels.studio"]||"Studio"," gives online Visual Studio Code environment to build projects. You can choose from the below readily available templates to start building your project. If the template you are looking for is not available, you can always create a new workspace from scratch using the Alpine template.\n                        ")),E("br",null)," ",E("br",null),E(s.a,{variant:"h5",component:"h1",color:"primary",gutterBottom:!0},"Your Workspaces "),G&&E(T.a,null),!G&&null!==Y&&E(x.a.Fragment,null,(null===Y||void 0===Y?void 0:Y.length)>0?E(s.a,{variant:"body1",color:"textSecondary"},"Below, you'll find a list of your workspaces. Simply click on the workspace to resume your work"):E(s.a,{variant:"body1",color:"textSecondary"},"No workspaces found. You can always launch a new workspace from the above-listed templates"),E("br",null),E("br",null),E(f.a,{container:!0,spacing:6},Y.sort((function(t,e){return new Date(e.created)-new Date(t.created)})).map((function(t){return E(f.a,{key:t._id,item:!0,xs:12,sm:6,md:4,lg:3,onClick:function(){return ut(t)}},E(C.a,{workspace:t,variant:"outlined",companyName:R[t.template._id].title,jobTitle:R[t.template._id].status,jobLocation:R[t.template._id].vm,companyLogo:R[t.template._id].logo,jobsCount:"< 1 Minute",companyInfo:R[t.template._id].description,link:R[t.template._id].link,tags:R[t.template._id].tags}))})))),E("br",null)," ",E("br",null),E(s.a,{variant:"h5",component:"h1",color:"primary"},"Templates"),E("br",null),E(f.a,{container:!0,spacing:6},Object.values(R).map((function(t){return E(f.a,{key:t._id,item:!0,xs:12,sm:6,md:4,lg:3},E("div",{onClick:function(){q.Router.pushRoute("".concat(st?"/embed":"","/studio/").concat(t._id),{shallow:!0})}},E(A.a,{variant:"outlined",companyName:t.title,jobTitle:t.status,jobLocation:t.vm,companyLogo:t.logo,jobsCount:"< 1 Minute",companyInfo:t.description,link:t.link,tags:t.tags})))}))),E("br",null),E("br",null),V&&E(f.a,{container:!0},E(f.a,{item:!0,xs:6,md:2}," ",E(D,{title:"Total Workspaces",value:V.totalWorkspaces})," "),E(f.a,{item:!0,xs:6,md:2}," ",E(D,{title:"Last 7 Days",value:V.totalWorkspacesLast7Days,previousValue:V.totalWorkspacesLast7DaysPrevious})," "),E(f.a,{item:!0,xs:6,md:2}," ",E(D,{title:"Today",value:V.totalWorkspacesToday,previousValue:V.totalWorkspacesYesterday})," "),E(f.a,{item:!0,xs:6,md:2}," ",E(D,{title:"Live",value:V.totalRunningWorkspaces})," ")),E(u.a,{style:{marginTop:2,marginBottom:10}}),E("br",null)),!1===st&&E(N.a,null)),E(p.a,{className:e.backdrop,open:et},E("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}}," ",E(d.a,{color:"inherit"})," ",E("p",null,"Starting the workspace")," ")))};J.getInitialProps=function(){var t=Object(r.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{foo:"temp fix for missing query"});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.default=J},"oa/T":function(t,e,a){"use strict";var n=a("wx14"),o=a("Ff2n"),r=a("q1tI"),i=a("iuhU"),s=a("H2TA"),c=r.forwardRef((function(t,e){var a=t.classes,s=t.className,c=t.component,l=void 0===c?"div":c,u=Object(o.a)(t,["classes","className","component"]);return r.createElement(l,Object(n.a)({className:Object(i.a)(a.root,s),ref:e},u))}));e.a=Object(s.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(c)}},[["1RBv",1,0,2,3,4,6,5,7,8,9,10,11,12,36,45]]]);